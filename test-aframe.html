<!DOCTYPE html>
<html>
<head>
    <title>A-Frame Image Test</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
</head>
<body>
    <h1>Testing Image Loading in A-Frame</h1>
    <p>Image URL: <span id="imageUrl"></span></p>
    <button onclick="testImage()">Test Image</button>
    
    <a-scene embedded style="height: 400px; width: 100%;">
        <a-sky id="test-sky" src="" rotation="0 0 0"></a-sky>
        <a-camera wasd-controls="acceleration: 50">
            <a-cursor color="#FFF"></a-cursor>
        </a-camera>
    </a-scene>

    <script>
        const imageId = '689779a64956505c47af77fc';
        const imageUrl = `http://localhost:8080/api/images/${imageId}`;
        
        document.getElementById('imageUrl').textContent = imageUrl;
        
        function testImage() {
            console.log('Testing image:', imageUrl);
            
            // First test if image loads
            const testImg = new Image();
            testImg.onload = function() {
                console.log('✅ Image loaded successfully:', testImg.width + 'x' + testImg.height);
                
                // Apply to A-Frame sky
                const sky = document.getElementById('test-sky');
                sky.setAttribute('src', imageUrl);
                console.log('Applied to A-Frame sky');
            };
            testImg.onerror = function(error) {
                console.error('❌ Image failed to load:', error);
            };
            testImg.src = imageUrl;
        }
        
        // Auto-test on load
        setTimeout(testImage, 1000);
    </script>
</body>
</html>
